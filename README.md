# Blender URDF Tools Plugin

一个用于在Blender中创建和编辑URDF（Unified Robot Description Format）文件的插件工具。该插件简化了使用Phobos插件制作铰接数据的创建流程，提供了在一个插件界面上完整的URDF工作流程支持。

## 功能特点

- 🔧 **前置数据处理**：清理和准备3D模型数据
- ⚡ **快捷操作**：提供常用操作的快捷键支持
- 🔗 **链接管理**：创建和管理URDF链接（Links）
- 🔄 **关节设置**：支持旋转和滑动关节的创建和配置
- 📤 **导出功能**：一键导出URDF文件和相关资源

## 安装方法

1. 下载插件文件（`PLUGIN.py`文件）
2. 在Blender中打开：`编辑 > 偏好设置 > 插件`
3. 点击右侧下三角选择选择`从磁盘安装`安装插件文件
4. 点击键盘`N`键，在插件列表中启用"URDF Tools"
5. 插件面板将出现在3D视窗的侧边栏"URDF Tools"标签页中

## 使用前提

Blender已经安装Phobos插件

## 使用指南

### 1. 前置修改

在开始URDF创建之前，需要对3D模型进行预处理：

#### 清除父类关系
- **功能**：移除对象的父子关系并保持变换
- **用途**：为后续的URDF结构准备干净的对象层级

#### 删除多余模块（非网格类）
- **功能**：删除场景中的非网格对象（如相机、灯光等）
- **用途**：保持场景整洁，只保留模型相关的网格对象

#### 设定Phobos及几何类型
- **功能**：为选中对象设置为visual和mesh类型
- **用途**：标记对象为URDF可识别的几何体

### 2. 快捷键操作

#### 组合物体
- **功能**：合并选中的网格对象
- **用途**：合并相关的几何体以简化模型结构
- **替代快捷键**：`Ctrl + J`

#### 创建游标（选中点线面的几何中心）
- **功能**：在选中几何元素的中心位置放置3D游标
- **用途**：为精确定位关节位置提供参考点
- **替代快捷键**：`Shift + S + 鼠标选择`

#### 相关骨骼
- **功能**：将物体绑定于骨骼
- **用途**：调试和检查骨骼结构
- **替代快捷键**：`Ctrl + P`

### 3. Links创建及设定

#### *创建link
- **功能**：使用Phobos插件创建新的URDF链接
- **用途**：为机器人的每个部件创建对应的链接节点

#### 一键命名links（按数字）
- **功能**：自动为所有链接分配数字编号名称
- **用途**：快速标准化链接命名、
- **提示**：一键命名其他link之后再创建所需的base_link

#### 命名base_link
- **功能**：将选中对象命名为"base_link"
- **用途**：设置机器人的根链接

#### 绑定非移动模块及其他link至base_link
- **功能**：将静态部件和其他链接绑定到基础链接
- **用途**：建立正确的父子关系结构
- **提示**：使用该键之前需要先完成所有子link的绑定

#### base_link设定
- **功能**：配置基础链接的模块根属性
- **用途**：将base_link标记为机器人的根节点

### 4. 关节设定

#### 创建转动关节
- **功能**：为选中对象创建旋转关节
- **用途**：创建可旋转的关节连接

#### 创建滑动关节
- **功能**：为选中对象创建直线滑动关节
- **用途**：创建可滑动的关节连接

#### *设定关节属性
- **功能**：使用Phobos插件定义关节的详细属性以及自动命名关节
- **用途**：精确配置关节的物理属性

#### link属性检查（控制台输出）
- **功能**：在控制台输出当前对象的所有URDF相关属性
- **用途**：调试和验证关节配置是否正确

### 5. 导出设置

#### 设定模块及URDF类型
- **功能**：配置对象的导出类型和模块属性，自动勾选urdf, joint_limits, dae
- **用途**：确保对象以正确的格式导出到URDF

#### 选择路径并导出URDF
- **功能**：选择导出位置并直接在相应位置生成URDF文件
- **输出**：包含`.urdf`文件和相关的网格文件
- **用途**：生成最终的模型描述文件

## 工作流程建议

1. **模型准备**
   - 导入或创建3D机器人模型
   - 使用"前置修改"功能清理模型

2. **结构建立**
   - 使用快捷操作合并相关部件
   - 用快捷创建游标按键并生成所有关节处的links
   - 一键命名links
   - 创建并命名base_link
   - 将所有关节处（移动）网格绑定于相应links
   - 一键将静止物块和其他link绑定至base_link并设定base_link属性

3. **关节配置**
   - 设定关节类型（旋转或滑动）
   - 配置关节的运动范围和一键命名关节

4. **验证导出**
   - 配置导出选项
   - 导出URDF文件并验证

## 依赖要求

- **Blender版本**：3.0+
- **Phobos插件**：某些功能需要Phobos插件支持
- **Python版本**：Blender内置Python环境

## 故障排除

### 常见问题

1. **关节属性未正确设置**
   - 使用"link属性检查"功能查看控制台输出
   - 确认对象已正确创建为link

2. **导出失败**
   - 检查是否存在base_link
   - 确认所有对象都有正确的Phobos属性

3. **快捷键冲突**
   - 在Blender偏好设置中检查键盘映射
   - 必要时修改或禁用冲突的快捷键
